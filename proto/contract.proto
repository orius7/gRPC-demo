syntax = "proto3";

package contract;

option go_package = "grpc-go-demo/proto;proto";


//A message that stores user ID's mapped to their names
message User {
  int32 id = 1;
  string name = 2;
}

message UserDirectory {
  //key = id, value = name
  map<int32, string> users = 1;
}

message RemoveUserRequest {
  int32 id = 1;
}


message Empty {}

//client can request entire UserDirectory
//client always synchronized
service UserDirectoryService {
  // Stream updates to all connected clients
  rpc StreamUserDirectory(Empty) returns (stream UserDirectory);
}
